{% include 'includes/header.html' %}
<div class="container py-4">
  <h1>{{ action }} Usuario</h1>
  <form method="post">
    <div class="mb-3">
      <label for="nombres" class="form-label">Nombres</label>
      <input type="text" class="form-control" name="nombres" id="nombres"
             value="{{ u.nombres if u else '' }}" required>
    </div>
    <div class="mb-3">
      <label for="apellidos" class="form-label">Apellidos</label>
      <input type="text" class="form-control" name="apellidos" id="apellidos"
             value="{{ u.apellidos if u else '' }}" required>
    </div>
    <div class="mb-3">
      <label for="nickname" class="form-label">Nickname</label>
      <input type="text" class="form-control" name="nickname" id="nickname"
             value="{{ u.nickname if u else '' }}" required>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Contraseña</label>
      <input type="password" class="form-control" name="password" id="password" {% if action=='Crear' %}required{% endif %}>
      {% if action == 'Editar' %}
        <small class="text-muted">Dejar en blanco para mantener la contraseña actual</small>
      {% endif %}
    </div>
    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" name="requiere_cambio_pw" id="requiere_cambio_pw"
             {% if u and u.requiere_cambio_pw %}checked{% endif %}>
      <label class="form-check-label" for="requiere_cambio_pw">Requiere cambio de contraseña</label>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" class="form-control" name="email" id="email"
             value="{{ u.email if u else '' }}">
    </div>
    <div class="mb-3">
      <label for="rol" class="form-label">Rol</label>
      <input type="text" class="form-control" name="rol" id="rol"
             value="{{ u.rol if u else '' }}">
    </div>
    {% if action == 'Editar' %}
    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" name="activo" id="activo"
             {% if u and u.activo %}checked{% endif %}>
      <label class="form-check-label" for="activo">Activo</label>
    </div>
    {% endif %}
    <button type="submit" class="btn btn-success">{{ action }}</button>
    <a href="{{ url_for('usuarios.index') }}" class="btn btn-secondary">Volver</a>
  </form>
</div>
{% include 'includes/footer.html' %}
